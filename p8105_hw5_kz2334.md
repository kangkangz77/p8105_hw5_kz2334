p8105\_hw5\_kz2334
================
Kangkang Zhang
11/7/2018

Problem 1
---------

Load required packages.

``` r
#load packages
library(tidyverse)
library(viridis)
```

<br> Import file names to create a dataframe.

``` r
file_name = tibble(
  id = list.files("./data/")
)
```

<br> Read in data for each subject.

``` r
study_data = file_name %>% 
  mutate(infor = purrr::map(str_c("./data/", id), read_csv)) 

study_data
```

    ## # A tibble: 20 x 2
    ##    id         infor           
    ##    <chr>      <list>          
    ##  1 con_01.csv <tibble [1 × 8]>
    ##  2 con_02.csv <tibble [1 × 8]>
    ##  3 con_03.csv <tibble [1 × 8]>
    ##  4 con_04.csv <tibble [1 × 8]>
    ##  5 con_05.csv <tibble [1 × 8]>
    ##  6 con_06.csv <tibble [1 × 8]>
    ##  7 con_07.csv <tibble [1 × 8]>
    ##  8 con_08.csv <tibble [1 × 8]>
    ##  9 con_09.csv <tibble [1 × 8]>
    ## 10 con_10.csv <tibble [1 × 8]>
    ## 11 exp_01.csv <tibble [1 × 8]>
    ## 12 exp_02.csv <tibble [1 × 8]>
    ## 13 exp_03.csv <tibble [1 × 8]>
    ## 14 exp_04.csv <tibble [1 × 8]>
    ## 15 exp_05.csv <tibble [1 × 8]>
    ## 16 exp_06.csv <tibble [1 × 8]>
    ## 17 exp_07.csv <tibble [1 × 8]>
    ## 18 exp_08.csv <tibble [1 × 8]>
    ## 19 exp_09.csv <tibble [1 × 8]>
    ## 20 exp_10.csv <tibble [1 × 8]>

<br> Tidy the result and manipulate file names to include control arm and subject ID.

``` r
study_data = study_data %>%
  mutate( id = str_replace(id, ".csv", "")) %>% 
  separate(id, into = c("arm", "id"), sep = "_") %>%
  unnest() %>% 
  gather(week, value = value, week_1:week_8) %>% 
  mutate(week = as.numeric(str_replace(week, "week_", "")),
         id = as.numeric(id))

study_data
```

    ## # A tibble: 160 x 4
    ##    arm      id  week value
    ##    <chr> <dbl> <dbl> <dbl>
    ##  1 con       1     1  0.2 
    ##  2 con       2     1  1.13
    ##  3 con       3     1  1.77
    ##  4 con       4     1  1.04
    ##  5 con       5     1  0.47
    ##  6 con       6     1  2.37
    ##  7 con       7     1  0.03
    ##  8 con       8     1 -0.08
    ##  9 con       9     1  0.08
    ## 10 con      10     1  2.14
    ## # ... with 150 more rows
